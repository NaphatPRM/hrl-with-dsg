
CommandNotFoundError: Your shell has not been properly configured to use 'conda activate'.
To initialize your shell, run

    $ conda init <SHELL_NAME>

Currently supported shells are:
  - bash
  - fish
  - tcsh
  - xonsh
  - zsh
  - powershell

See 'conda init --help' for more information and options.

IMPORTANT: You may need to close and restart your shell after running 'conda init'.


/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/ale_py/roms/__init__.py:94: DeprecationWarning: Automatic importing of atari-py roms won't be supported in future releases of ale-py. Please migrate over to using `ale-import-roms` OR an ALE-supported ROM package. To make this warning disappear you can run `ale-import-roms --import-from-pkg atari_py.atari_roms`.For more information see: https://github.com/mgbellemare/Arcade-Learning-Environment#rom-management
  _RESOLVED_ROMS = _resolve_roms()

WARNING:tensorflow:From /home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/tensorflow/python/compat/v2_compat.py:111: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/tensorflow/python/keras/engine/base_layer_v1.py:1694: UserWarning: `layer.apply` is deprecated and will be removed in a future version. Please use `layer.__call__` method instead.
  warnings.warn('`layer.apply` is deprecated and '
/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/tensorflow/python/keras/legacy_tf_layers/core.py:336: UserWarning: `tf.layers.flatten` is deprecated and will be removed in a future version. Please use `tf.keras.layers.Flatten` instead.
  warnings.warn('`tf.layers.flatten` is deprecated and '
WARNING:absl:use_staging=True is no longer supported
/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/numpy/core/_methods.py:163: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (which is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to do this, you must specify 'dtype=object' when creating the ndarray.
  arr = asanyarray(a)
/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/numpy/core/fromnumeric.py:3440: RuntimeWarning: Mean of empty slice.
  return _methods._mean(a, axis=axis, dtype=dtype,
/home/npermpre/miniconda3/envs/dsg-mng/lib/python3.9/site-packages/numpy/core/_methods.py:189: RuntimeWarning: invalid value encountered in double_scalars
  ret = ret.dtype.type(ret / rcount)
Traceback (most recent call last):
  File "/home/npermpre/miniconda3/lib/python3.9/runpy.py", line 197, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/home/npermpre/miniconda3/lib/python3.9/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/train.py", line 262, in <module>
    trainer.run_loop(current_episode + 1, int(1e4))    
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/trainer.py", line 129, in run_loop
    print(self.salient_events); self.graph_consolidation_run_loop(episode, duration=consolidation_duration)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/trainer.py", line 382, in graph_consolidation_run_loop
    state, info, done, reset, reached, traj = self.dsg_agent.run_loop(state=state,
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/dsg.py", line 110, in run_loop
    state, info, done, reset, traj1 = self.run_sub_loop(state, info, dsc_goal_vertex, goal_salient_event, episode, eval_mode)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/dsg.py", line 142, in run_sub_loop
    state, info, done, reset, traj = self.dsc_outside_graph(state, info,
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsg/dsg.py", line 203, in dsc_outside_graph
    state, info, done, reset, new_options, traj = self.dsc_agent.dsc_rollout(state, info, 
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/dsc.py", line 116, in dsc_rollout
    selected_option = self.act(state, info, goal_salient_event.target_info)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/dsc.py", line 90, in act
    chains_targeting_goal = self._get_chains_corresponding_to_goal(goal_info)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/dsc.py", line 85, in _get_chains_corresponding_to_goal
    if option.is_term_true(None, goal_info):
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/option.py", line 186, in is_term_true
    return self.parent.pessimistic_is_init_true(state,  info)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/option.py", line 167, in pessimistic_is_init_true
    classifier_decision = self.initiation_classifier.pessimistic_predict(x)
  File "/ifs/CS/replicated/home/npermpre/hrl-with-dsg/hrl/agent/dsc/classifier/conv_init_classifier.py", line 65, in pessimistic_predict
    assert isinstance(state, np.ndarray)
AssertionError
